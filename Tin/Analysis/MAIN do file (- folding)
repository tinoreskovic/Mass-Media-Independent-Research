clear
use "/Users/tinoreskovic/Desktop/research media/raw data.dta"
//PART 1: guardian, independent, telegraph:
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games
rvfplot
predict inestimate, xb
predict inresiduals, r
twoway (scatter inestimate value) (lfit inestimate value)
twoway (scatter value mentionseng3) (lfitci value mentionseng3)
reg secondary primary mentionseng3
//without media best
reg value primary i.pos i.transfer_year transfer_age games
rvfplot
predict nomediaestimate, xb
predict nomediaresiduals, r
twoway (scatter nomediaestimate value) (lfit nomediaestimate value)
//team top 5 revenuewise
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games if team
rvfplot
predict teamestimate, xb
predict teamresiduals, r
replace teamestimate = . if (team==0)
replace teamresiduals = . if (team==0)
twoway (scatter teamestimate value) (lfit teamestimate value)
twoway (scatter value mentionseng3 if team) (lfitci value mentionseng3 if team)
reg secondary primary mentionseng3 if team
//without media best for top 5
reg value primary i.pos i.transfer_year transfer_age games if team
rvfplot
predict topnomediaestimate, xb
predict topnomediaresiduals, r
twoway (scatter topnomediaestimate value) (lfit topnomediaestimate value)
//smaller than 10, 20; larger than 5, 10, 15, 20
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games  if valuegroupfirst10 
rvfplot
predict first10inestimate, xb
predict first10inresiduals, r
twoway (scatter first10inestimate value) (lfit first10inestimate value)
twoway (scatter value mentionseng3) (lfitci value mentionseng3)
reg secondary primary mentionseng3 if valuegroupfirst10
//smaller than 20
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games if valuegroupfirst20 
rvfplot
predict first20inestimate, xb
predict first20inresiduals, r
twoway (scatter first20inestimate value) (lfit first20inestimate value)
twoway (scatter value mentionseng3) (lfitci value mentionseng3)
reg secondary primary mentionseng3 if valuegroupfirst20
//>5
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games if valuegroup5
rvfplot
predict fiveestimate, xb
predict fiveresiduals, r
replace fiveestimate = . if (value<5)
replace fiveresiduals = . if (value<5)
twoway (scatter fiveestimate value) (lfit fiveestimate value)
twoway (scatter value mentionseng3 if valuegroup5) (lfitci value mentionseng3 if valuegroup5)
reg secondary primary mentionseng3 if valuegroup5
//>10
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games if valuegroup10
rvfplot
predict tenestimate, xb
predict tenresiduals, r
replace tenestimate = . if (value<10)
replace tenresiduals = . if (value<10)
twoway (scatter tenestimate value) (lfit tenestimate value)
twoway (scatter value mentionseng3 if valuegroup10) (lfitci value mentionseng3 if valuegroup10)
reg secondary primary mentionseng3 if valuegroup10
//>15
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games if valuegroup15
rvfplot
predict fiftestimate, xb
predict fiftresiduals, r
replace fiftestimate = . if (value<15)
replace fiftresiduals = . if (value<15)
reg secondary primary mentionseng3 if valuegroup15
twoway (scatter fiftestimate value) (lfit fiftestimate value)
twoway (scatter value mentionseng3 if valuegroup15) (lfitci value mentionseng3 if valuegroup15)
//>20
reg value mentionseng3 primary i.pos i.transfer_year transfer_age games if valuegroup20
rvfplot
predict twestimate, xb
predict twresiduals, r
replace twestimate = . if (value<20)
replace twresiduals = . if (value<20)
twoway (scatter twestimate value) (lfit twestimate value)
twoway (scatter value mentionseng3 if valuegroup20) (lfitci value mentionseng3 if valuegroup20)
reg secondary primary mentionseng3 if valuegroup20
